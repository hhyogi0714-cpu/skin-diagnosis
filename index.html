<!DOCTYPE html>
<html lang="ja">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>肌年齢診断 - Skin Age Diagnosis</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link
        href="https://fonts.googleapis.com/css2?family=Noto+Sans+JP:wght@300;400;500&family=Shippori+Mincho:wght@400;600&display=swap"
        rel="stylesheet">
    <link rel="stylesheet" href="style.css">
</head>

<body>
    <div class="app-container">
        <!-- Start Screen -->
        <section id="start-screen" class="screen active">
            <div class="content-wrapper">
                <p class="salon-name">肌育サロン 天使のしずく 本店</p>
                <h1 class="title">肌年齢チェック</h1>
                <p class="subtitle">老化リスクと肌年齢を徹底診断</p>
                <div class="input-group">
                    <label for="user-age">現在の年齢を入力してください</label>
                    <input type="number" id="user-age" placeholder="例: 50" min="10" max="100">
                </div>
                <button id="start-btn" class="primary-btn">診断を始める</button>
            </div>
        </section>

        <!-- Question Screen -->
        <section id="question-screen" class="screen hidden">
            <div class="progress-bar">
                <div class="progress-fill" id="progress-fill"></div>
            </div>
            <div class="content-wrapper">
                <div class="question-number">Q <span id="q-current">1</span> / <span id="q-total">--</span></div>
                <h2 id="question-text" class="question-text">質問読み込み中...</h2>
                <div id="options-container" class="options-container">
                    <!-- Options will be generated here -->
                </div>
            </div>
        </section>

        <!-- Camera Screen -->
        <section id="camera-screen" class="screen hidden">
            <div class="content-wrapper camera-wrapper">
                <h2 class="title" style="font-size: 1.5rem; margin-bottom: 1rem;">肌の状態をスキャン</h2>
                <p class="subtitle" style="margin-bottom: 1.5rem;">アルバムから写真を選んでスキャン</p>

                <div class="camera-container">
                    <div id="camera-placeholder" class="camera-placeholder">
                        <div
                            style="display: flex; flex-direction: column; gap: 1rem; width: 100%; align-items: center; padding: 1rem;">
                            <h3 style="color: #6d5045; margin-bottom: 0.5rem; font-size: 1.1rem;">写真は診断の参考にのみ使用されます</h3>

                            <!-- Option 1: File/Camera Select -->
                            <button id="upload-photo-btn" class="primary-btn"
                                style="width: 100%; padding: 1rem; display: flex; align-items: center; justify-content: center; gap: 0.5rem;">
                                <span style="font-size: 1.2rem;">📁</span> アルバムから写真を選ぶ
                            </button>

                            <p style="color: #999; font-size: 0.8rem;">※スマートフォン内の写真から選択してください</p>

                            <!-- Option 2: Skip -->
                            <button id="skip-photo-btn"
                                style="background: none; border: 1px solid #ccc; padding: 0.8rem; width: 100%; border-radius: 50px; color: #888; margin-top: 1rem; cursor: pointer;">
                                顔認証をしない（スキップ）
                            </button>
                        </div>

                        <!-- File Input (Standard behavior) -->
                        <input type="file" id="camera-file-input" accept="image/*" style="display: none;">
                    </div>

                    <!-- Preview Image only -->
                    <img id="camera-preview-img" style="display: none; width: 100%; height: 100%; object-fit: cover;">
                </div>
            </div>

            <div class="camera-controls" style="display: none;">
                <button id="shutter-btn" class="shutter-btn"></button>
                <p class="camera-note">※ 画像はサーバーには保存されません</p>
            </div>
    </div>
    </section>

    <!-- Loading Screen -->
    <section id="loading-screen" class="screen hidden">
        <div class="content-wrapper">
            <div class="loader"></div>
            <p class="loading-text">肌データを分析中...</p>
        </div>
    </section>

    <!-- Result Screen -->
    <section id="result-screen" class="screen hidden">
        <div class="content-wrapper">
            <!-- AI Photo Result -->
            <div id="result-photo-container"
                style="display: none; position: relative; width: 100%; max-width: 300px; margin: 0 auto 1.5rem; border-radius: 12px; overflow: hidden; box-shadow: 0 4px 12px rgba(0,0,0,0.1); border: 2px solid #d4c2b0;">
                <div
                    style="position: absolute; top: 10px; left: 10px; background: rgba(0,0,0,0.7); color: #fff; padding: 4px 12px; border-radius: 20px; font-size: 11px; z-index: 10;">
                    AI分析完了</div>
                <img id="result-base-image" style="width: 100%; display: block;">
                <canvas id="result-overlay-canvas"
                    style="position: absolute; top: 0; left: 0; width: 100%; height: 100%;"></canvas>
                <div class="scan-line" style="display: none;"></div>
            </div>

            <p class="result-intro">あなたの肌年齢は...</p>
            <div class="result-circle">
                <span id="result-age" class="result-age">--</span>
                <span class="age-unit">歳</span>
            </div>

            <!-- Radar Chart Section -->
            <div class="chart-container">
                <canvas id="radarChart" width="300" height="300"></canvas>
            </div>

            <!-- Advice Section -->
            <div id="advice-container" class="advice-container">
                <h3 id="advice-title" class="advice-title">診断タイトル</h3>
                <p id="advice-message" class="advice-message">メッセージ本文</p>

                <div class="advice-grid">
                    <div class="advice-card">
                        <h4 class="card-title">💆‍♀️ 身体的な対策</h4>
                        <ul id="advice-physical" class="advice-list"></ul>
                    </div>
                    <div class="advice-card">
                        <h4 class="card-title">🧴 おすすめスキンケア</h4>
                        <ul id="advice-skincare" class="advice-list"></ul>
                    </div>
                    <div class="advice-card">
                        <h4 class="card-title">🥗 おすすめの食べ物</h4>
                        <ul id="advice-food" class="advice-list"></ul>
                    </div>

                    <!-- Premium Exosome Advice -->
                    <div class="advice-card exosome-card">
                        <h4 class="card-title">✨ エクソソーム導入によるアプローチ</h4>
                        <p id="advice-exosome" class="exosome-text"></p>
                    </div>
                </div>
            </div>

            <button id="retake-btn" class="secondary-btn">ホームに戻る</button>
        </div>
    </section>
    </div>
    <script src="questions.js"></script>
    <script src="script.js"></script>
</body>

</html>